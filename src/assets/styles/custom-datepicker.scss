/* ==========================================================
   vue-datepicker 系统变量映射层
   完全基于你的框架系统变量进行桥接
   ========================================================== */

/* vue-datepicker 全局变量覆盖 */
:root {
  /* 过渡动画 */
  --dp-common-transition: all 0.2s ease-in-out !important;
  --dp-animation-duration: 0.2s !important;
  --dp-menu-appear-transition-timing: cubic-bezier(0.4, 0, 0.2, 1) !important;
  --dp-transition-timing: ease-out !important;
  --dp-action-row-transtion: all 0.3s ease-in-out !important;
  --dp-transition-timing-general: 0.2s !important;

  /* 字体 */
  --dp-font-size: var(--app-font-size) !important;
  --dp-preview-font-size: var(--app-font-sizes) !important;
  --dp-time-font-size: var(--app-font-sizex) !important;

  /* 圆角 */
  --dp-border-radius: var(--rounded) !important;
  --dp-cell-border-radius: var(--rounded) !important;

  /* 内边距 */
  --dp-menu-padding: var(--padding) !important;
  --dp-cell-padding: var(--paddings) !important;
  --dp-common-padding: var(--paddings) !important;
  --dp-input-padding: var(--paddings) var(--padding) !important;
  --dp-action-buttons-padding: var(--paddings) !important;
  --dp-calendar-header-cell-padding: var(--paddings) !important;
  --dp-overlay-col-padding: var(--paddings) !important;
  --dp-action-row-padding: var(--paddings) !important;
  --dp-calendar-wrap-padding: 0 var(--paddings) !important;

  /* 外边距和间距 */
  --dp-row-margin: var(--gaps) 0 !important;
  --dp-multi-calendars-spacing: var(--gap) !important;
}

/* 浅色主题 */
.dp__theme_light {
  --dp-background-color: var(--bg100) !important;
  --dp-text-color: var(--text100) !important;
  --dp-border-color: var(--bg300) !important;
  --dp-hover-color: var(--bg200) !important;
  --dp-primary-color: var(--primary100) !important;
  --dp-primary-text-color: var(--primary400) !important;
  --dp-disabled-color: var(--bg300) !important;
  --dp-scroll-bar-color: var(--bg300) !important;
  --dp-scroll-bar-hover-color: var(--bg300) !important;
}

/* 深色主题 */
.dp__theme_dark {
  --dp-background-color: var(--bg100) !important;
  --dp-text-color: var(--text100) !important;
  --dp-border-color: var(--bg300) !important;
  --dp-hover-color: var(--bg200) !important;
  --dp-primary-color: var(--primary100) !important;
  --dp-primary-text-color: var(--primary400) !important;
  --dp-disabled-color: var(--bg300) !important;
  --dp-scroll-bar-color: var(--bg300) !important;
  --dp-scroll-bar-hover-color: var(--bg300) !important;
}

/* 修复首屏加载时日期选择器不可点击的问题 */
.dp__input_wrap {
  pointer-events: auto !important;
  z-index: 1000 !important;
  position: relative !important;
}

.dp__input {
  pointer-events: auto !important;
  cursor: pointer !important;
  z-index: 1000 !important;
}

.dp__menu {
  pointer-events: auto !important;
  z-index: 1001 !important;
}

/* 确保日期选择器面板可见和可交互 */
.dp__menu_wrap {
  pointer-events: auto !important;
  z-index: 1001 !important;
}

/* 修复可能的父容器影响 */
.dp__input_wrap * {
  pointer-events: auto !important;
}

/* 初始化完成后的样式 */
.dp-initialized {
  .dp__input_wrap {
    pointer-events: auto !important;
    z-index: 1000 !important;
  }

  .dp__input {
    pointer-events: auto !important;
    cursor: pointer !important;
  }
}

/* 强制确保所有日期选择器相关元素可交互 */
.dp__input_wrap,
.dp__input,
.dp__menu,
.dp__menu_wrap,
.dp__calendar,
.dp__calendar_wrap {
  pointer-events: auto !important;
  z-index: 1000 !important;
}

/* 防止父容器影响 */
.dp__input_wrap {
  isolation: isolate !important;
}

/* 增强的样式优化 */
.dp__input {
  border: 1px solid var(--bg300) !important;
  border-radius: var(--dp-border-radius) !important;
  background-color: var(--bg100) !important;
  color: var(--text100) !important;
  font-size: var(--dp-font-size) !important;
  transition: var(--dp-common-transition) !important;
}

.dp__input:focus {
  border-color: var(--primary100) !important;
  box-shadow: 0 0 0 2px var(--primary100) !important;
  outline: none !important;
}

.dp__input:hover {
  border-color: var(--primary100) !important;
}

.dp__input::placeholder {
  color: var(--text200) !important;
  opacity: 1 !important;
}

/* 日历单元格样式 */
.dp__cell {
  border-radius: var(--dp-cell-border-radius) !important;
  transition: var(--dp-common-transition) !important;
}

.dp__cell:hover {
  background-color: var(--bg200) !important;
}

.dp__cell.dp__cell_in_range {
  background-color: var(--primary100) !important;
  color: var(--primary400) !important;
}

.dp__cell.dp__cell_selected {
  background-color: var(--primary100) !important;
  color: var(--primary400) !important;
}

.dp__cell.dp__cell_today {
  border: 1px solid var(--primary100) !important;
}

/* 按钮样式 */
.dp__action_button {
  border-radius: var(--dp-cell-border-radius) !important;
  transition: var(--dp-common-transition) !important;
  font-size: var(--dp-font-size) !important;
}

.dp__action_button:hover {
  background-color: var(--bg200) !important;
}

/* 菜单样式 */
.dp__menu {
  border-radius: var(--dp-border-radius) !important;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  border: 1px solid var(--bg300) !important;
}

/* 年份选择器弹窗 */
.dp__year_picker,
.dp__month_picker,
.dp__calendar_wrap {
  border-radius: var(--dp-border-radius) !important;
}

/* 年份选择器网格 */
.dp__year_grid,
.dp__month_grid {
  border-radius: var(--dp-border-radius) !important;
}

/* 年份选择器单元格 */
.dp__year_grid .dp__cell,
.dp__month_grid .dp__cell {
  border-radius: var(--dp-cell-border-radius) !important;
}

/* 所有弹窗容器 */
.dp__overlay,
.dp__overlay_cell,
.dp__overlay_cell_pad {
  border-radius: var(--dp-border-radius) !important;
}

/* 时间选择器弹窗 */
.dp__time_picker_wrap {
  border-radius: var(--dp-border-radius) !important;
}

/* 预设范围弹窗 */
.dp__preset_ranges {
  border-radius: var(--dp-border-radius) !important;
}

/* 所有弹窗内容区域 */
.dp__menu_content {
  border-radius: var(--dp-border-radius) !important;
}

/* 强制覆盖所有可能的弹窗容器 */
.dp__menu_wrap,
.dp__menu_wrap *,
.dp__overlay,
.dp__overlay *,
.dp__calendar,
.dp__calendar *,
.dp__year_picker,
.dp__year_picker *,
.dp__month_picker,
.dp__month_picker *,
.dp__time_picker,
.dp__time_picker * {
  border-radius: var(--dp-border-radius) !important;
}

/* 特殊处理年份和月份选择器 */
.dp__year_picker .dp__cell,
.dp__month_picker .dp__cell {
  border-radius: var(--dp-cell-border-radius) !important;
}

/* 确保所有弹窗都有圆角 */
.dp__menu_wrap > *,
.dp__overlay > *,
.dp__calendar > * {
  border-radius: var(--dp-border-radius) !important;
}

/* 年份选择器特殊处理 */
.dp__year_picker {
  border-radius: var(--dp-border-radius) !important;
  overflow: hidden !important;
}

.dp__year_picker .dp__cell {
  border-radius: var(--dp-cell-border-radius) !important;
}

/* 月份选择器特殊处理 */
.dp__month_picker {
  border-radius: var(--dp-border-radius) !important;
  overflow: hidden !important;
}

.dp__month_picker .dp__cell {
  border-radius: var(--dp-cell-border-radius) !important;
}

/* 滚动条样式修复 - 完全隐藏但保持功能 */
.dp__menu,
.dp__year_picker,
.dp__month_picker,
.dp__calendar_wrap,
.dp__overlay {
  /* Firefox 滚动条隐藏 */
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

/* Webkit 浏览器滚动条完全隐藏 */
.dp__menu::-webkit-scrollbar,
.dp__year_picker::-webkit-scrollbar,
.dp__month_picker::-webkit-scrollbar,
.dp__calendar_wrap::-webkit-scrollbar,
.dp__overlay::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

/* 确保滚动功能仍然可用 */
.dp__menu,
.dp__year_picker,
.dp__month_picker,
.dp__calendar_wrap,
.dp__overlay {
  overflow: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* 时间选择器样式 */
.dp__time_input {
  border: 1px solid var(--bg300) !important;
  border-radius: var(--dp-cell-border-radius) !important;
  background-color: var(--bg100) !important;
  color: var(--text100) !important;
  font-size: var(--dp-time-font-size) !important;
}

.dp__time_input:focus {
  border-color: var(--primary100) !important;
  outline: none !important;
}

/* 预设按钮样式 */
.dp__preset_ranges {
  border-top: 1px solid var(--bg300) !important;
}

.dp__preset_range {
  border-radius: var(--dp-cell-border-radius) !important;
  transition: var(--dp-common-transition) !important;
  font-size: var(--dp-font-size) !important;
}

.dp__preset_range:hover {
  background-color: var(--bg200) !important;
}

/* 响应式优化 */
@media (max-width: 768px) {
  :root {
    --dp-cell-size: 2rem !important;
    --dp-button-height: 2rem !important;
    --dp-menu-min-width: 16rem !important;
    --dp-font-size: var(--app-font-sizes) !important;
    --dp-time-font-size: var(--app-font-size) !important;
  }
}

@media (max-width: 480px) {
  :root {
    --dp-cell-size: 1.75rem !important;
    --dp-button-height: 1.75rem !important;
    --dp-menu-min-width: 14rem !important;
    --dp-font-size: var(--app-font-sizes) !important;
    --dp-time-font-size: var(--app-font-size) !important;
  }
}
