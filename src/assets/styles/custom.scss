@use '@/assets/styles/custom-color.scss';
@use '@/assets/styles/custom-nprogress.scss';
@use '@/assets/styles/custom-primevue.scss';

/* AG Grid 固定列样式 - 确保复选框列固定在左侧 */
.ag-pinned-left-cols-container {
  position: sticky !important;
  left: 0 !important;
  z-index: 10 !important;
}

.ag-pinned-left-cols-container .ag-cell,
.ag-pinned-left-cols-container .ag-header-cell {
  position: sticky !important;
  left: 0 !important;
  z-index: 10 !important;
  background-color: var(--ag-background-color) !important;
  border-right: 1px solid var(--ag-border-color) !important;
}

/* 确保固定列在所有主题下都能正确显示 */
.ag-theme-alpine .ag-pinned-left-cols-container,
.ag-theme-quartz .ag-pinned-left-cols-container,
.ag-theme-balham .ag-pinned-left-cols-container {
  position: sticky !important;
  left: 0 !important;
  z-index: 10 !important;
}

/* 确保固定列容器有正确的背景色 */
.ag-pinned-left-cols-container {
  background-color: var(--ag-background-color) !important;
}

/* 确保固定列的单元格有正确的样式 */
.ag-pinned-left-cols-container .ag-cell {
  background-color: var(--ag-background-color) !important;
}

.ag-pinned-left-cols-container .ag-header-cell {
  background-color: var(--ag-header-background-color, var(--ag-background-color)) !important;
}

/* View Transitions API 样式 - 固定分层优先级避免闪白 */
::view-transition-old(root) {
  animation: none;
  background: var(--bg100-old, var(--bg100));
  will-change: clip-path, opacity;
  mix-blend-mode: normal;
  z-index: 1; /* 永远在底层 */
}

::view-transition-new(root) {
  animation: none;
  background: var(--bg100-new, var(--bg100));
  will-change: clip-path, opacity;
  mix-blend-mode: normal;
  z-index: 2; /* 永远在上层，避免白屏 */
}

/* 优化过渡性能：避免与 View Transitions 叠加，这里不对 html 应用全局过渡 */

/* 主题切换渐隐渐现蒙层样式 - 动态主题色版本 */
.theme-fade-overlay {
  pointer-events: none;
  backdrop-filter: blur(2px); /* 轻微模糊，过渡更柔和 */
  position: fixed;
  inset: 0;
  z-index: 2000;
  opacity: 0;
  transition: opacity 0.4s ease;
}

/* 浏览器兼容性处理 */
@supports not (view-transition-name: root) {
  .theme-transition {
    transition: all 0.3s ease;
  }

  .theme-switch {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

* {
  font-size: var(--fontSize);
}

/* 快捷样式 */
// 宽度高度比例 1:1
.size-1-1 {
  aspect-ratio: 1/1;
}

// 宽度高度比例 16:9
.size-16-9 {
  aspect-ratio: 16/9;
}

// 宽度高度比例 4:3
.size-4-3 {
  aspect-ratio: 4/3;
}
